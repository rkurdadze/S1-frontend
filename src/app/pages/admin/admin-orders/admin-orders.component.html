<section class="admin-page">
  <header class="admin-page__header">
    <div>
      <p class="admin-page__eyebrow">Операции</p>
      <h2>Заказы</h2>
      <p class="admin-page__subtitle">Контролируйте статус заказов, доставку и коммуникацию с клиентами.</p>
    </div>
  </header>

  <div class="admin-card">
    <div class="admin-card__header">
      <h3>Активные заказы</h3>
      <span class="admin-pill">{{ orders.length }} в работе</span>
    </div>
    <div class="order-list">
      <p class="admin-empty" *ngIf="isLoading">Загрузка заказов...</p>
  
      <ng-container *ngFor="let order of orders">
        <article class="order-row">
          <div>
            <h4>{{ order.orderNumber }}</h4>
            <p>{{ order.customer }} • {{ order.date }}</p>
          </div>
          <div class="order-row__meta">
            <span class="order-row__status">{{ order.status }}</span>
            <span class="order-row__total">{{ order.total }}</span>
            <span class="order-row__delivery">{{ order.delivery }}</span>
          </div>
          <div class="order-row__actions">
            <button class="admin-button" type="button" (click)="selectOrder(order)">Обновить статус</button>
            <button class="admin-button" type="button" (click)="deleteOrder(order)">Удалить</button>
          </div>
        </article>

        <article class="admin-card admin-card--inline" *ngIf="selectedOrder?.id === order.id">
          <div class="admin-card__header">
            <h3>Маршрут доставки</h3>
            <span class="admin-pill">{{ selectedOrder?.orderNumber }}</span>
          </div>
          <form class="admin-form" (ngSubmit)="saveOrder()">
            <label>
              Номер заказа
              <input type="text" name="editOrderNumber" [(ngModel)]="form.orderNumber" />
            </label>
            <label>
              Клиент
              <input type="text" name="editCustomer" [(ngModel)]="form.customer" />
            </label>
            <div class="admin-form__row">
              <label>
                Сумма
                <input type="text" name="editTotal" [(ngModel)]="form.total" />
              </label>
              <label>
                Статус
                <input type="text" name="editStatus" [(ngModel)]="form.status" />
              </label>
            </div>
            <label>
              Способ доставки
              <input type="text" name="editDelivery" [(ngModel)]="form.delivery" />
            </label>
            <label>
              Дата
              <input type="text" name="editDate" [(ngModel)]="form.date" />
            </label>
            <label>
              Адрес доставки
              <input type="text" name="editAddress" [(ngModel)]="form.address" />
            </label>
            <label>
              Комментарий курьеру
              <textarea rows="3" name="editNotes" [(ngModel)]="form.notes"></textarea>
            </label>
            <label>
              Окно доставки
              <input type="text" name="editWindow" [(ngModel)]="form.window" />
            </label>
            <div class="admin-form__actions">
              <button class="admin-button admin-button--primary" type="submit">Сохранить</button>
              <button class="admin-button" type="button" (click)="resetForm()">Сбросить</button>
            </div>
          </form>
        </article>
      </ng-container>
    </div>
  </div>
</section>
