<section class="admin-page">
  <header class="admin-page__header">
    <div>
      <p class="admin-page__eyebrow">{{ 'admin.orders.eyebrow' | translate }}</p>
      <h2>{{ 'admin.orders.title' | translate }}</h2>
      <p class="admin-page__subtitle">{{ 'admin.orders.subtitle' | translate }}</p>
    </div>
  </header>

  <div class="admin-grid">
    <section class="admin-card">
      <div class="admin-card__header">
        <h3>{{ 'admin.orders.list_title' | translate }}</h3>
        <span class="admin-pill">{{ 'admin.orders.all_count' | translate: { count: orders.length } }}</span>
      </div>
      <p class="admin-empty" *ngIf="isLoading">{{ 'admin.orders.loading' | translate }}</p>
      <div class="order-list">
        <ng-container *ngFor="let order of orders">
          <article class="order-row" (click)="selectOrder(order)">
            <div class="order-row__main">
              <h4>{{ order.orderNumber }}</h4>
              <p>{{ order.customer }} â€¢ {{ order.date }}</p>
            </div>
            <div class="order-row__status">
              <span class="admin-pill">{{ order.status }}</span>
              <span class="order-row__total">{{ order.total }}</span>
            </div>
            <div class="order-row__actions">
              <button class="admin-button" type="button" (click)="$event.stopPropagation(); selectOrder(order)">{{ 'admin.orders.button_edit' | translate }}</button>
              <button class="admin-button" type="button" (click)="$event.stopPropagation(); deleteOrder(order)">{{ 'admin.orders.button_delete' | translate }}</button>
            </div>
          </article>

          <div class="admin-card admin-card--inline" *ngIf="selectedOrder?.id === order.id">
            <div class="admin-card__header">
              <h3>{{ 'admin.orders.edit_card' | translate }}</h3>
              <span class="admin-pill">{{ selectedOrder?.orderNumber }}</span>
            </div>
            <form class="admin-form" (ngSubmit)="saveOrder()">
              <div class="admin-form__row">
                <label>
                  {{ 'admin.orders.label_order_number' | translate }}
                  <input type="text" name="orderNumber" [(ngModel)]="form.orderNumber" />
                </label>
                <label>
                  {{ 'admin.orders.label_customer' | translate }}
                  <input type="text" name="customer" [(ngModel)]="form.customer" />
                </label>
              </div>
              <div class="admin-form__row">
                <label>
                  {{ 'admin.orders.label_status' | translate }}
                  <input type="text" name="status" [(ngModel)]="form.status" />
                </label>
                <label>
                  {{ 'admin.orders.label_total' | translate }}
                  <input type="text" name="total" [(ngModel)]="form.total" />
                </label>
              </div>
              <label>
                {{ 'admin.orders.label_address' | translate }}
                <input type="text" name="address" [(ngModel)]="form.address" />
              </label>
              <div class="admin-form__row">
                <label>
                  {{ 'admin.orders.label_delivery' | translate }}
                  <input type="text" name="delivery" [(ngModel)]="form.delivery" />
                </label>
                <label>
                  {{ 'admin.orders.label_window' | translate }}
                  <input type="text" name="window" [(ngModel)]="form.window" />
                </label>
              </div>
              <label>
                {{ 'admin.orders.label_notes' | translate }}
                <textarea rows="3" name="notes" [(ngModel)]="form.notes"></textarea>
              </label>
              <div class="admin-form__actions">
                <button class="admin-button admin-button--primary" type="submit">{{ 'admin.orders.button_save' | translate }}</button>
                <button class="admin-button" type="button" (click)="resetForm()">{{ 'admin.orders.button_reset' | translate }}</button>
              </div>
            </form>
          </div>
        </ng-container>
      </div>
    </section>
  </div>
</section>
