<section class="admin-page">
  <header class="admin-page__header">
    <div>
      <p class="admin-page__eyebrow">{{ 'admin.orders.eyebrow' | translate }}</p>
      <h2>{{ 'admin.orders.title' | translate }}</h2>
      <p class="admin-page__subtitle">{{ 'admin.orders.subtitle' | translate }}</p>
    </div>
  </header>

  <div class="admin-grid">
    <section class="admin-card">
      <div class="admin-card__header">
        <div class="admin-card__title-group">
          <h3>{{ 'admin.orders.list_title' | translate }}</h3>
          <span class="admin-pill">{{ 'admin.orders.all_count' | translate: { count: orders.length } }}</span>
        </div>
      </div>
      
      <p class="admin-empty" *ngIf="isLoading">{{ 'admin.orders.loading' | translate }}</p>
      
      <div class="admin-list">
        <ng-container *ngFor="let order of orders">
          <article class="admin-card" [class.is-editing]="selectedOrder?.id === order.id" style="margin-bottom: 12px; background: rgba(255,255,255,0.02)">
            <div class="admin-card__header">
              <div class="admin-card__title-group">
                <h3>{{ order.orderNumber }}</h3>
                <span class="admin-pill">{{ order.status }}</span>
                <span class="admin-chip">{{ order.total }}</span>
              </div>
              
              <!-- EDIT ACTIONS (HEADER) -->
              <div class="admin-card__header-actions" *ngIf="selectedOrder?.id === order.id">
                <button class="admin-button admin-button--save" type="button" (click)="saveOrder()">
                  <i class="fas fa-check"></i>
                  {{ 'admin.orders.button_save' | translate }}
                </button>
                <button class="admin-button admin-button--cancel" type="button" (click)="resetForm()">
                  <i class="fas fa-times"></i>
                  {{ 'admin.orders.button_reset' | translate }}
                </button>
              </div>

              <!-- VIEW ACTIONS (HEADER) -->
              <div class="admin-actions" *ngIf="selectedOrder?.id !== order.id">
                <button class="admin-icon-button admin-icon-button--edit" type="button" (click)="selectOrder(order)" [title]="'admin.orders.button_edit' | translate">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="admin-icon-button admin-icon-button--delete" type="button" (click)="$event.stopPropagation(); deleteOrder(order)" [title]="'admin.orders.button_delete' | translate">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>

            <div class="admin-card__content" *ngIf="selectedOrder?.id !== order.id" style="margin-top: 8px;">
              <p class="muted">{{ order.customer }} â€¢ {{ order.date }}</p>
            </div>

            <!-- INLINE EDIT FORM -->
            <div class="admin-inline-form" *ngIf="selectedOrder?.id === order.id" style="margin-top: 16px;">
              <form class="admin-form" (ngSubmit)="saveOrder()">
                <div class="admin-form__row">
                  <label>
                    {{ 'admin.orders.label_order_number' | translate }}
                    <input type="text" name="orderNumber" [(ngModel)]="form.orderNumber" />
                  </label>
                  <label>
                    {{ 'admin.orders.label_customer' | translate }}
                    <input type="text" name="customer" [(ngModel)]="form.customer" />
                  </label>
                </div>
                <div class="admin-form__row">
                  <label>
                    {{ 'admin.orders.label_status' | translate }}
                    <input type="text" name="status" [(ngModel)]="form.status" />
                  </label>
                  <label>
                    {{ 'admin.orders.label_total' | translate }}
                    <input type="text" name="total" [(ngModel)]="form.total" />
                  </label>
                </div>
                <label>
                  {{ 'admin.orders.label_address' | translate }}
                  <input type="text" name="address" [(ngModel)]="form.address" />
                </label>
                <div class="admin-form__row">
                  <label>
                    {{ 'admin.orders.label_delivery' | translate }}
                    <input type="text" name="delivery" [(ngModel)]="form.delivery" />
                  </label>
                  <label>
                    {{ 'admin.orders.label_window' | translate }}
                    <input type="text" name="window" [(ngModel)]="form.window" />
                  </label>
                </div>
                <label>
                  {{ 'admin.orders.label_notes' | translate }}
                  <textarea rows="3" name="notes" [(ngModel)]="form.notes"></textarea>
                </label>
              </form>
            </div>
          </article>
        </ng-container>
      </div>
    </section>
  </div>
</section>