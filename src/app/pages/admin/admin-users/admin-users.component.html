<section class="admin-page">
  <header class="admin-page__header">
    <div>
      <p class="admin-page__eyebrow">{{ 'admin.users.eyebrow' | translate }}</p>
      <h2>{{ 'admin.users.title' | translate }}</h2>
      <p class="admin-page__subtitle">{{ 'admin.users.subtitle' | translate }}</p>
    </div>
    <button class="admin-button admin-button--primary admin-button--create" type="button" (click)="toggleCreateForm()">
      {{ (showCreateForm ? 'admin.users.hide_form' : 'admin.users.show_form') | translate }}
    </button>
  </header>

  <div class="admin-card" *ngIf="showCreateForm">
    <div class="admin-card__header">
      <h3>{{ 'admin.users.new_card' | translate }}</h3>
      <span class="admin-pill">{{ 'admin.users.new_pill' | translate }}</span>
    </div>
    <form class="admin-form" (ngSubmit)="saveUser()">
      <label>
        {{ 'admin.users.label_name' | translate }}
        <input type="text" name="name" [(ngModel)]="form.name" />
      </label>
      <label>
        {{ 'admin.users.label_email' | translate }}
        <input type="email" name="email" [(ngModel)]="form.email" />
      </label>
      <div class="admin-form__row">
        <label>
          {{ 'admin.users.label_role' | translate }}
          <input type="text" name="role" [(ngModel)]="form.role" />
        </label>
        <label>
          {{ 'admin.users.label_status' | translate }}
          <input type="text" name="status" [(ngModel)]="form.status" />
        </label>
      </div>
      <div class="admin-form__actions">
        <button class="admin-button admin-button--primary" type="submit">{{ 'admin.users.button_save' | translate }}</button>
        <button class="admin-button" type="button" (click)="resetForm()">{{ 'admin.users.button_reset' | translate }}</button>
      </div>
    </form>
  </div>

  <div class="admin-card">
    <div class="admin-card__header">
      <h3>{{ 'admin.users.list_title' | translate }}</h3>
      <span class="admin-pill">{{ 'admin.users.active_count' | translate: { count: users.length } }}</span>
    </div>
  <div class="admin-grid">
    <p class="admin-empty" *ngIf="isLoading">{{ 'admin.users.loading' | translate }}</p>
    <ng-container *ngFor="let user of users">
        <article class="user-row">
          <div>
            <h4>{{ user.name }}</h4>
            <p>{{ user.email }} â€¢ {{ user.lastActive }}</p>
          </div>
          <div class="user-row__meta">
            <span class="user-row__role">{{ user.role }}</span>
            <span class="user-row__status">{{ user.status }}</span>
          </div>
          <div class="user-row__actions">
            <button class="admin-button" type="button" (click)="selectUser(user)">{{ 'admin.users.button_edit' | translate }}</button>
            <button class="admin-button" type="button" (click)="deleteUser(user)">{{ 'admin.users.button_disable' | translate }}</button>
          </div>
        </article>

        <article class="admin-card admin-card--inline" *ngIf="selectedUser?.id === user.id">
          <div class="admin-card__header">
            <h3>{{ 'admin.users.edit_card' | translate }}</h3>
            <span class="admin-pill">ID {{ selectedUser?.id }}</span>
          </div>
          <form class="admin-form" (ngSubmit)="saveUser()">
            <label>
              {{ 'admin.users.label_name' | translate }}
              <input type="text" name="editName" [(ngModel)]="form.name" />
            </label>
            <label>
              {{ 'admin.users.label_email' | translate }}
              <input type="email" name="editEmail" [(ngModel)]="form.email" />
            </label>
            <div class="admin-form__row">
              <label>
                {{ 'admin.users.label_role' | translate }}
                <input type="text" name="editRole" [(ngModel)]="form.role" />
              </label>
              <label>
                {{ 'admin.users.label_status' | translate }}
                <input type="text" name="editStatus" [(ngModel)]="form.status" />
              </label>
            </div>
            <div class="admin-form__actions">
              <button class="admin-button admin-button--primary" type="submit">{{ 'admin.users.button_save' | translate }}</button>
              <button class="admin-button" type="button" (click)="resetForm()">{{ 'admin.users.button_reset' | translate }}</button>
            </div>
          </form>
        </article>
      </ng-container>
    </div>
  </div>
</section>
