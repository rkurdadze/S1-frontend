<div class="purchase-bar">
  <div class="purchase-card">
    <div class="price-block">
      <div class="price-row">
        <div class="price-current">{{ price | number:'1.0-2' }} ₸</div>
        <div class="price-compare" *ngIf="discountPercentage !== null">
          <span class="price-old">{{ compareAtPrice | number:'1.0-2' }} ₸</span>
          <span class="discount-pill">-{{ discountPercentage }}%</span>
        </div>
      </div>
      <div class="availability" [ngClass]="'availability--' + availabilityState">
        <span class="availability__dot" aria-hidden="true"></span>
        <span class="availability__label">{{ availabilityLabel }}</span>
      </div>
    </div>

    <div class="controls">
      <div class="quantity-control">
        <button type="button" (click)="decrease()" aria-label="decrease quantity">−</button>
        <span>{{ quantity }}</span>
        <button type="button" (click)="increase()" aria-label="increase quantity">+</button>
      </div>

      <div class="cta-buttons">
        <button type="button" class="btn btn-filled" [disabled]="!canSubmit" (click)="addToCart.emit()">
          <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M3 4h2l1 10h11l1.2-6H7.1" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="9.5" cy="19.5" r="1.4" fill="currentColor"/>
            <circle cx="17.5" cy="19.5" r="1.4" fill="currentColor"/>
          </svg>
          <span class="sr-only">{{ 'item_purchase.add_to_cart' | translate }}</span>
        </button>
        <button type="button" class="btn btn-filled" [disabled]="!canSubmit" (click)="buyNow.emit()">
          {{ 'item_purchase.buy' | translate }}
        </button>
      </div>
    </div>
  </div>
</div>
