<div class="app-toast-container position-fixed top-0 end-0 p-3" aria-live="polite" aria-atomic="true">
    @for (toast of toasts$ | async; track toast.id) {
        <div
                class="app-toast toast show mb-2"
                [ngClass]="toastClass(toast)"
                role="alert"
                aria-live="assertive"
                aria-atomic="true"
        >
            <div class="toast-body d-flex flex-column gap-2">
                <div class="d-flex align-items-start gap-3">
                    <i class="fa-solid"
                       [ngClass]="{
                   'fa-circle-check': toast.type === 'success',
                   'fa-circle-exclamation': toast.type === 'error',
                   'fa-triangle-exclamation': toast.type === 'warning',
                   'fa-circle-info': toast.type === 'info'
                 }"
                    ></i>
                    <div class="flex-grow-1">{{ toast.text }}</div>
                    <button
                            type="button"
                            class="btn-close"
                            aria-label="Закрыть"
                            (click)="dismiss(toast.id)"
                    ></button>
                </div>

                @if (toast.actions && toast.actions.length > 0) {
                    <div class="toast-actions d-flex gap-2 justify-content-end">
                        @for (action of toast.actions; track action.label) {
                            <button
                                    type="button"
                                    class="btn"
                                    [ngClass]="{
                                        'btn-primary': action.primary && !action.danger,
                                        'btn-danger': action.danger,
                                        'btn-outline-secondary': !action.primary && !action.danger
                                    }"
                                    (click)="action.callback(toast.id); dismiss(toast.id)"
                            >
                                {{ action.label }}
                            </button>
                        }
                    </div>
                }
            </div>
        </div>
    }
</div>